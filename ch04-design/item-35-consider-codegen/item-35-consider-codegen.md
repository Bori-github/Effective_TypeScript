# 데이터가 아닌, API와 명세를 보고 타입 만들기 | Effective TypeScript

다른 아이템들에서 타입을 잘 설계하는 방법과 잘못 설계된 타입의 단점에 대해 설명했습니다.
이번 아이템에서는 타입을 직접 작성하지 않고 자동으로 생성할 수 있는 방법에 대해 다룹니다.

## 명세를 참고해 타입을 생성하기
파일 형식, API, 명세 등 프로젝트 외부에서 비롯된 타입은 명세를 참고해 타입을 생성해야 합니다.
명세를 참고해 타입을 생성해야 사용자의 실수를 줄일 수 있습니다.
예시 데이터를 참고하여 타입을 생성하면 보이는 데이터들만 고려하게 되므로 예기치 않은 오류가 발생할 수 있습니다.

명세를 기반으로 타입을 작성한다면 사용 가능한 모든 값에 대해 작동한다는 확신을 가질 수 있습니다.

## API 명세로부터 타입을 생성하기
API의 타입은 어떻게 생성하는 것이 좋을까요?

### [GraphQL](https://graphql-kr.github.io/)
GraphQL은 API를 위한 쿼리 언어로, 타입스크립트와 비슷한 타입 시스템을 사용합니다.
클라이언트는 GraphQL 쿼리를 통해 필요한 데이터를 서버에 요청하고, 서버는 해당 쿼리를 해석하여 데이터를 반환합니다.

GraphQL 스키마를 사용하여 API에서 사용되는 데이터 모델의 구조와 규칙을 정의하기 때문에 클라이언트와 서버 간의 데이터 요청과 응답을 정확하게 매핑할 수 있도록 도와줍니다.

```typescript
// GraphQL scheme
type Project {
  name: String
  tagline: String
  contributors: [User]
}
```

```typescript
// GraphQL query
{
  project(name: "GraphQL") {
    tagline
  }
}
```

```json
// Return data
{
  "project": {
    "tagline": "A query language for APIs"
  }
}
```

Apollo와 같은 GraphQL 쿼리를 타입스크립트 타입으로 변환해주는 도구를 이용하여 스키마로부터 특정 쿼리의 타입스크립트 타입을 생성할 수 있고, API를 문서화할 수 있습니다.

이렇게 생성된 타입 정보는 API를 정확히 사용할 수 있도록 도와줍니다.
GraphQL 스키마로부터 타입이 생성되기 때문에 타입과 실제 값이 항상 일치하여 개발자가 올바른 타입의 데이터를 사용하고 처리할 수 있도록 도와줍니다.

## 데이터로부터 타입을 생성하기
만약 명세 정보나 공식 스키마가 없다면 데이터로부터 타입을 생성해야 합니다.

### [quicktype](https://quicktype.io/)
quicktype은 JSON 데이터로부터 자동으로 타입 선언을 생성해주는 도구입니다. 주어진 JSON 데이터를 분석하여 해당 데이터에 대한 타입 정의를 생성해주기 때문에 개발자가 수동으로 타입을 작성하는 번거로움을 줄일 수 있습니다.
하지만 생성된 타입이 실제 데이터와 일치하지 않을 수 있다는 점을 주의해야 합니다.

## 마무리
- 코드의 타입 안정성을 얻기 위해 API 또는 데이터 형식에 대한 타입 생성을 고려해야 합니다.
- 데이터에 드러나지 않는 예외적인 경우들이 문제가 될 수 있기 때문에 데이터보다는 명세로부터 타입을 생성하는 것이 좋습니다.